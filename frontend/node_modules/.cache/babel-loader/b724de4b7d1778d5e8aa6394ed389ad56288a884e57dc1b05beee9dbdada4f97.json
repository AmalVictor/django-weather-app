{"ast":null,"code":"import axios from 'axios';\n// Create axios instance with base URL\nconst API = axios.create({\n  baseURL: 'http://localhost:8000/api',\n  withCredentials: true // needed for Django CSRF protection\n});\n\n// Add request interceptor for authentication\nAPI.interceptors.request.use(config => {\n  const token = localStorage.getItem('token');\n  if (token) {\n    config.headers.Authorization = `Token ${token}`;\n  }\n  return config;\n}, error => Promise.reject(error));\n\n// Weather API\nexport const getWeather = async city => {\n  const response = await API.get(`/weather/?city=${city}`);\n  return response.data;\n};\n\n// City Suggestions API \nexport const getCitySuggestions = async query => {\n  if (!query || query.length < 2) return [];\n  try {\n    const response = await API.get(`/city-suggestions/?q=${encodeURIComponent(query)}`);\n    return response.data;\n  } catch (error) {\n    console.error('Error fetching city suggestions:', error);\n    return [];\n  }\n};\n\n// Authentication API\nexport const login = async (username, password) => {\n  const response = await API.post('/auth/login/', {\n    username,\n    password\n  });\n  return response.data;\n};\nexport const register = async (username, email, password) => {\n  const response = await API.post('/auth/register/', {\n    username,\n    email,\n    password\n  });\n  return response.data;\n};\nexport const logout = async () => {\n  const response = await API.post('/auth/logout/');\n  return response.data;\n};\nexport const getCurrentUser = async () => {\n  const response = await API.get('/auth/user/');\n  return response.data;\n};\n\n// Search History API\nexport const getSearchHistory = async () => {\n  const response = await API.get('/history/');\n  return response.data;\n};","map":{"version":3,"names":["axios","API","create","baseURL","withCredentials","interceptors","request","use","config","token","localStorage","getItem","headers","Authorization","error","Promise","reject","getWeather","city","response","get","data","getCitySuggestions","query","length","encodeURIComponent","console","login","username","password","post","register","email","logout","getCurrentUser","getSearchHistory"],"sources":["C:/Users/hp/OneDrive/Desktop/weather_dashboard/frontend/src/services/api.ts"],"sourcesContent":["import axios from 'axios';\r\nimport { WeatherData, SearchHistoryItem, User, CitySuggestion } from '../types';\r\n\r\n// Create axios instance with base URL\r\nconst API = axios.create({\r\n  baseURL: 'http://localhost:8000/api',\r\n  withCredentials: true // needed for Django CSRF protection\r\n});\r\n\r\n// Add request interceptor for authentication\r\nAPI.interceptors.request.use(\r\n  (config) => {\r\n    const token = localStorage.getItem('token');\r\n    if (token) {\r\n      config.headers.Authorization = `Token ${token}`;\r\n    }\r\n    return config;\r\n  },\r\n  (error) => Promise.reject(error)\r\n);\r\n\r\n// Weather API\r\nexport const getWeather = async (city: string): Promise<WeatherData> => {\r\n  const response = await API.get(`/weather/?city=${city}`);\r\n  return response.data;\r\n};\r\n\r\n// City Suggestions API \r\nexport const getCitySuggestions = async (query: string): Promise<CitySuggestion[]> => {\r\n  if (!query || query.length < 2) return [];\r\n  \r\n  try {\r\n    const response = await API.get(`/city-suggestions/?q=${encodeURIComponent(query)}`);\r\n    return response.data;\r\n  } catch (error) {\r\n    console.error('Error fetching city suggestions:', error);\r\n    return [];\r\n  }\r\n};\r\n\r\n// Authentication API\r\nexport const login = async (username: string, password: string) => {\r\n  const response = await API.post('/auth/login/', { username, password });\r\n  return response.data;\r\n};\r\n\r\nexport const register = async (username: string, email: string, password: string) => {\r\n  const response = await API.post('/auth/register/', { username, email, password });\r\n  return response.data;\r\n};\r\n\r\nexport const logout = async () => {\r\n  const response = await API.post('/auth/logout/');\r\n  return response.data;\r\n};\r\n\r\nexport const getCurrentUser = async (): Promise<User> => {\r\n  const response = await API.get('/auth/user/');\r\n  return response.data;\r\n};\r\n\r\n// Search History API\r\nexport const getSearchHistory = async (): Promise<SearchHistoryItem[]> => {\r\n  const response = await API.get('/history/');\r\n  return response.data;\r\n}; "],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AAGzB;AACA,MAAMC,GAAG,GAAGD,KAAK,CAACE,MAAM,CAAC;EACvBC,OAAO,EAAE,2BAA2B;EACpCC,eAAe,EAAE,IAAI,CAAC;AACxB,CAAC,CAAC;;AAEF;AACAH,GAAG,CAACI,YAAY,CAACC,OAAO,CAACC,GAAG,CACzBC,MAAM,IAAK;EACV,MAAMC,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;EAC3C,IAAIF,KAAK,EAAE;IACTD,MAAM,CAACI,OAAO,CAACC,aAAa,GAAG,SAASJ,KAAK,EAAE;EACjD;EACA,OAAOD,MAAM;AACf,CAAC,EACAM,KAAK,IAAKC,OAAO,CAACC,MAAM,CAACF,KAAK,CACjC,CAAC;;AAED;AACA,OAAO,MAAMG,UAAU,GAAG,MAAOC,IAAY,IAA2B;EACtE,MAAMC,QAAQ,GAAG,MAAMlB,GAAG,CAACmB,GAAG,CAAC,kBAAkBF,IAAI,EAAE,CAAC;EACxD,OAAOC,QAAQ,CAACE,IAAI;AACtB,CAAC;;AAED;AACA,OAAO,MAAMC,kBAAkB,GAAG,MAAOC,KAAa,IAAgC;EACpF,IAAI,CAACA,KAAK,IAAIA,KAAK,CAACC,MAAM,GAAG,CAAC,EAAE,OAAO,EAAE;EAEzC,IAAI;IACF,MAAML,QAAQ,GAAG,MAAMlB,GAAG,CAACmB,GAAG,CAAC,wBAAwBK,kBAAkB,CAACF,KAAK,CAAC,EAAE,CAAC;IACnF,OAAOJ,QAAQ,CAACE,IAAI;EACtB,CAAC,CAAC,OAAOP,KAAK,EAAE;IACdY,OAAO,CAACZ,KAAK,CAAC,kCAAkC,EAAEA,KAAK,CAAC;IACxD,OAAO,EAAE;EACX;AACF,CAAC;;AAED;AACA,OAAO,MAAMa,KAAK,GAAG,MAAAA,CAAOC,QAAgB,EAAEC,QAAgB,KAAK;EACjE,MAAMV,QAAQ,GAAG,MAAMlB,GAAG,CAAC6B,IAAI,CAAC,cAAc,EAAE;IAAEF,QAAQ;IAAEC;EAAS,CAAC,CAAC;EACvE,OAAOV,QAAQ,CAACE,IAAI;AACtB,CAAC;AAED,OAAO,MAAMU,QAAQ,GAAG,MAAAA,CAAOH,QAAgB,EAAEI,KAAa,EAAEH,QAAgB,KAAK;EACnF,MAAMV,QAAQ,GAAG,MAAMlB,GAAG,CAAC6B,IAAI,CAAC,iBAAiB,EAAE;IAAEF,QAAQ;IAAEI,KAAK;IAAEH;EAAS,CAAC,CAAC;EACjF,OAAOV,QAAQ,CAACE,IAAI;AACtB,CAAC;AAED,OAAO,MAAMY,MAAM,GAAG,MAAAA,CAAA,KAAY;EAChC,MAAMd,QAAQ,GAAG,MAAMlB,GAAG,CAAC6B,IAAI,CAAC,eAAe,CAAC;EAChD,OAAOX,QAAQ,CAACE,IAAI;AACtB,CAAC;AAED,OAAO,MAAMa,cAAc,GAAG,MAAAA,CAAA,KAA2B;EACvD,MAAMf,QAAQ,GAAG,MAAMlB,GAAG,CAACmB,GAAG,CAAC,aAAa,CAAC;EAC7C,OAAOD,QAAQ,CAACE,IAAI;AACtB,CAAC;;AAED;AACA,OAAO,MAAMc,gBAAgB,GAAG,MAAAA,CAAA,KAA0C;EACxE,MAAMhB,QAAQ,GAAG,MAAMlB,GAAG,CAACmB,GAAG,CAAC,WAAW,CAAC;EAC3C,OAAOD,QAAQ,CAACE,IAAI;AACtB,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}